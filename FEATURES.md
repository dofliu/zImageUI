# Z-Image-Turbo Web UI - 功能清單

## 🎉 已完成功能 (Phase 1 & 2)

### ✅ 第一階段：核心功能

#### 1. **批量生成模式** (Batch Generation)
**路徑**: `/batch-generate` API
**功能**:
- 單張/批量模式切換
- 每行一個提示詞輸入
- 最多支援 20 張批量生成
- 序列化處理避免 VRAM 爆炸
- 實時進度追蹤
- 網格展示所有結果
- 成功/失敗統計
- ZIP 批量下載
- 點擊縮圖查看大圖

**使用方式**:
1. 點擊「批量生成」切換模式
2. 每行輸入一個提示詞
3. 點擊「開始批量生成」
4. 查看網格結果
5. 點擊「下載全部 (ZIP)」批量下載

---

#### 2. **風格預設模板** (Style Templates)
**路徑**: `/templates` API, `templates.json`
**功能**:
- 50+ 專業風格模板
- 7 大分類體系
- 下拉選單快速選擇
- 自動組合到提示詞
- 刷新按鈕重新載入

**風格分類**:
1. **藝術風格** (6種): 水彩、油畫、素描、水墨、浮世繪、印象派
2. **現代風格** (5種): 賽博龐克、極簡、復古、蒸汽龐克、波普
3. **動漫風格** (5種): 吉卜力、日式、迪士尼、像素、漫畫
4. **攝影風格** (4種): 電影、黑白、HDR、微距
5. **教學模板** (5種): 科學圖解、歷史場景、文學插圖、地理景觀、信息圖表
6. **3D渲染** (3種): 寫實3D、低多邊形、黏土渲染
7. **特殊效果** (4種): 霓虹發光、水晶質感、金屬質感、夢幻光效

**使用方式**:
1. 在風格模板下拉選單中選擇風格
2. 輸入基礎提示詞
3. 系統自動組合風格關鍵字
4. 點擊生成

---

#### 3. **圖片尺寸預設** (Size Presets)
**路徑**: `/size-presets` API
**功能**:
- 15+ 常用尺寸預設
- 3 大類別
- VRAM 使用提示
- 動態尺寸選擇
- 自動調整生成參數

**尺寸分類**:
1. **社群媒體** (5種):
   - Instagram 正方形 (1080×1080)
   - Instagram 直式 (1080×1350)
   - Facebook 封面 (1200×630)
   - Twitter 卡片 (1200×675)
   - YouTube 縮圖 (1280×720)

2. **列印尺寸** (4種):
   - A4 直式 (2480×3508)
   - A4 橫式 (3508×2480)
   - A5 直式 (1748×2480)
   - 明信片 (1600×1200)

3. **標準尺寸** (5種):
   - 正方形 512 [VRAM: 低]
   - 正方形 768 [VRAM: 中]
   - 正方形 1024 [VRAM: 高]
   - 寬屏 16:9 (1024×576)
   - 直式 9:16 (576×1024)

**使用方式**:
1. 在尺寸選擇器中選擇預設尺寸
2. 注意 VRAM 使用提示
3. 點擊生成

---

### ✅ 第二階段：進階功能

#### 4. **標籤系統** (Tags System)
**API 路徑**:
- `/tags` - 獲取所有標籤
- `/history/<item_id>/tags` - 更新標籤
- `/history/filter` - 按標籤過濾

**功能**:
- 為歷史記錄添加標籤
- 標籤雲顯示
- 標籤使用頻率統計
- 點擊標籤過濾
- 多標籤組合過濾
- 動態標籤管理

**使用方式**:
1. 在歷史記錄項目中添加標籤
2. 查看標籤雲統計
3. 點擊標籤進行過濾
4. 清除過濾查看全部

**標籤範例**:
- `#風景` - 風景類圖片
- `#人物` - 人物肖像
- `#教學` - 教學用途
- `#專案A` - 特定專案
- `#實驗` - 實驗性作品

---

#### 5. **Seed 固定控制** (Seed Control)
**路徑**: `/seed-control` API
**功能**:
- 固定隨機種子
- 重現相同結果
- 隨機種子生成
- Seed 顯示與記錄
- 檔案名稱包含 Seed

**使用方式**:
1. 勾選「使用固定種子」
2. 輸入 Seed 或點擊🎲生成隨機 Seed
3. 使用相同 Seed 和提示詞可重現結果
4. 檔案名稱格式: `seed_{seed}_{timestamp}.png`

**應用場景**:
- 重現喜歡的結果
- A/B 測試不同提示詞
- 教學演示
- 調試優化

---

## 📁 文件結構

```
zImage/
├── app.py                          # Flask 主程式（已升級）
├── config.py                       # 配置文件
├── templates.json                  # 風格模板資料庫
├── claude.md                       # 開發計劃
├── todo.md                         # 任務清單
├── FEATURES.md                     # 本文件
├── templates/
│   └── index.html                  # Web 介面（已升級）
├── static/
│   ├── css/
│   │   └── style.css              # 樣式表（已擴充）
│   └── js/
│       ├── script.js              # 主腳本（已升級）
│       ├── templates.js           # 風格/尺寸選擇器
│       └── advanced.js            # 進階功能（標籤/Seed）
└── generated_images/               # 生成圖片目錄
```

---

## 🎯 使用流程

### 基礎流程
1. 選擇生成模式（單張/批量）
2. 選擇風格模板（可選）
3. 選擇圖片尺寸（可選）
4. 輸入提示詞
5. 點擊生成
6. 查看結果
7. 下載圖片

### 進階流程
1. 啟用 Seed 控制
2. 設定固定 Seed
3. 生成圖片
4. 為圖片添加標籤
5. 使用標籤過濾查找
6. 重用 Seed 重現結果

---

## 🔧 技術特點

### 後端優化
- ✅ Sequential CPU Offload (0.7GB VRAM)
- ✅ Attention Slicing
- ✅ VAE Slicing
- ✅ 模型預載入
- ✅ GPU 快取自動清理
- ✅ 批量序列化處理

### 前端優化
- ✅ 模組化 JavaScript
- ✅ 響應式設計
- ✅ 實時預覽
- ✅ 錯誤處理
- ✅ 載入狀態顯示
- ✅ 美觀 UI 設計

---

## 📊 性能指標

| 項目 | 指標 |
|------|------|
| GPU 記憶體使用 | ~0.7GB |
| 系統 RAM 使用 | ~20GB (模型) |
| 單張生成時間 | 5-8 秒 (768×768) |
| 批量生成 | 支援最多 20 張 |
| 支援解析度 | 512-3508 像素 |
| 風格模板數量 | 50+ |
| 尺寸預設數量 | 15+ |

---

## 🚀 未來功能規劃

### 第三階段（待開發）
- [ ] 文字疊加功能
- [ ] 提示詞智能助手
- [ ] 批量導出 PDF/PPT
- [ ] 圖片編輯工具
- [ ] 背景移除
- [ ] 使用者系統

### 第四階段（長期）
- [ ] 多模型支援
- [ ] ControlNet 整合
- [ ] LoRA 模型
- [ ] API 對外開放
- [ ] 行動裝置 App
- [ ] 雲端同步

---

## 📝 更新日誌

### v2.0.0 (2025-12-01)
- ✅ 新增批量生成模式
- ✅ 新增 50+ 風格模板
- ✅ 新增 15+ 尺寸預設
- ✅ 新增標籤系統
- ✅ 新增 Seed 控制
- ✅ 優化 UI/UX
- ✅ 模組化代碼結構

### v1.0.0 (2025-11-30)
- ✅ 基礎 Web 介面
- ✅ 單張生成
- ✅ 歷史記錄
- ✅ VRAM 優化
- ✅ 側邊欄布局

---

**開發者**: Claude Code
**最後更新**: 2025-12-01
**版本**: v2.0.0
